name: generate

on: 
    schedule:
      - cron: '* 0/2 * * *'
    workflow_dispatch: 

jobs:
    build-and-deploy:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout Source Code
              uses: actions/checkout@v4

            - uses: actions/setup-node@v4
              with:
                node-version: 'latest'        
                
            - name: Install dependencies
              run: npm ci

            - name: Generate file
              run: node generate.js
              env:
                API_KEY: ${{ secrets.API_KEY }}

            - name: Deploy to GitHub Pages
              uses: JamesIves/github-pages-deploy-action@v4
              with:
                branch: main  # The branch the action should deploy to.
                folder: .  # The folder the action should deploy.
                single-commit: true  # Optional: Creates a single commit instead of maintaining history
                commit-message: "Deploy updates"  # Optional: Custom commit message for the deployment commit



